<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Pentachoron | cormullion</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Pentachoron" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This page contains quite a few animated GIFs. I apologise in advance if your browser or network connection doesn’t like them. It’s much easier to add a GIF than it is to embed a video into a GitHub pages blog, unfortunately." />
<meta property="og:description" content="This page contains quite a few animated GIFs. I apologise in advance if your browser or network connection doesn’t like them. It’s much easier to add a GIF than it is to embed a video into a GitHub pages blog, unfortunately." />
<link rel="canonical" href="http://localhost:4000/blog/2019/04/03/pentachoron.html" />
<meta property="og:url" content="http://localhost:4000/blog/2019/04/03/pentachoron.html" />
<meta property="og:site_name" content="cormullion" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-03T01:00:00+01:00" />
<script type="application/ld+json">
{"url":"http://localhost:4000/blog/2019/04/03/pentachoron.html","headline":"Pentachoron","dateModified":"2019-04-03T01:00:00+01:00","datePublished":"2019-04-03T01:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/2019/04/03/pentachoron.html"},"description":"This page contains quite a few animated GIFs. I apologise in advance if your browser or network connection doesn’t like them. It’s much easier to add a GIF than it is to embed a video into a GitHub pages blog, unfortunately.","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="cormullion" /></head>
<body><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

<p class="homebutton"><a href="https://cormullion.github.io">home</a></p>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Pentachoron</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-04-03T01:00:00+01:00" itemprop="datePublished"> 3 April 2019
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <blockquote>
  <p>This page contains quite a few animated GIFs. I apologise in advance if your browser or network connection doesn’t like them. It’s much easier to add a GIF than it is to embed a video into a GitHub pages blog, unfortunately.</p>
</blockquote>

<h3 id="pentachoron">Pentachoron</h3>

<p><img src="/images/pentachoron/header-image.svg" alt="image label" class="center-image" /></p>

<p>I encountered the word “pentachoron” recently for the first time, and I thought it had to be something cool. Turns out it is, so I thought I’d have a go at drawing one…</p>

<p>Unfortunately, it’s a 4-dimensional object, which is going to tax my limited 2D skills. But I like being out of my depth.</p>

<h2 id="first-steps">First steps</h2>

<p>The first job is to define a couple of types to help organize all the various points.</p>

<p>Here’s an immutable structure to hold the coordinates of a point in four dimensions. In four dimensions, the axes are usually called <code class="highlighter-rouge">x</code>, <code class="highlighter-rouge">y</code>, <code class="highlighter-rouge">z</code>, and <code class="highlighter-rouge">w</code>.</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="n">struct</span> <span class="n">Point4D</span> <span class="o">&lt;:</span> <span class="n">AbstractArray</span><span class="x">{</span><span class="kt">Float64</span><span class="x">,</span> <span class="mi">1</span><span class="x">}</span>
    <span class="n">x</span><span class="o">::</span><span class="kt">Float64</span>
    <span class="n">y</span><span class="o">::</span><span class="kt">Float64</span>
    <span class="n">z</span><span class="o">::</span><span class="kt">Float64</span>
    <span class="n">w</span><span class="o">::</span><span class="kt">Float64</span>
<span class="k">end</span>

<span class="n">Point4D</span><span class="x">(</span><span class="n">a</span><span class="o">::</span><span class="n">Array</span><span class="x">{</span><span class="kt">Float64</span><span class="x">,</span> <span class="mi">1</span><span class="x">})</span> <span class="o">=</span> <span class="n">Point4D</span><span class="x">(</span><span class="n">a</span><span class="o">...</span><span class="x">)</span>

<span class="n">Base</span><span class="o">.</span><span class="n">size</span><span class="x">(</span><span class="n">pt</span><span class="o">::</span><span class="n">Point4D</span><span class="x">)</span> <span class="o">=</span> <span class="x">(</span><span class="mi">4</span><span class="x">,</span> <span class="x">)</span>

<span class="n">Base</span><span class="o">.</span><span class="n">getindex</span><span class="x">(</span><span class="n">pt</span><span class="o">::</span><span class="n">Point4D</span><span class="x">,</span> <span class="n">i</span><span class="x">)</span> <span class="o">=</span> <span class="x">[</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span><span class="x">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span><span class="x">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">z</span><span class="x">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">w</span><span class="x">][</span><span class="n">i</span><span class="x">]</span></code></pre></figure>

<p>By adopting the AbstractArray as our stepmother type, we can pick up many useful behaviors. <code class="highlighter-rouge">size()</code> and <code class="highlighter-rouge">getindex()</code> can be taught how to handle Point4Ds. If you browse the <a href="https://docs.julialang.org/en/v1/manual/interfaces/#man-interface-array-1">official documentation</a> for a while you’ll find out how to effectively tap in to many desirable pre-defined abilities that our new type can inherit.</p>

<p>While we’re here, let’s do three-dimensional points as well:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="n">struct</span> <span class="n">Point3D</span> <span class="o">&lt;:</span> <span class="n">AbstractArray</span><span class="x">{</span><span class="kt">Float64</span><span class="x">,</span> <span class="mi">1</span><span class="x">}</span>
    <span class="n">x</span><span class="o">::</span><span class="kt">Float64</span>
    <span class="n">y</span><span class="o">::</span><span class="kt">Float64</span>
    <span class="n">z</span><span class="o">::</span><span class="kt">Float64</span>
<span class="k">end</span>

<span class="n">Base</span><span class="o">.</span><span class="n">size</span><span class="x">(</span><span class="n">pt</span><span class="o">::</span><span class="n">Point3D</span><span class="x">)</span> <span class="o">=</span> <span class="x">(</span><span class="mi">3</span><span class="x">,</span> <span class="x">)</span></code></pre></figure>

<h2 id="conversion">Conversion</h2>

<p>The primary task we have to address is how to convert a 4D point into a 2D point. Let’s start with the easier task: how to convert a 3D point into a 2D point, ie how can we draw a 3D shape on a flat surface?</p>

<p>Consider a simple cube. The front face and the back face could have the same X and Y coordinates, and vary only by their Z values.</p>

<p>(This is just a diagram, it’s not really 3D…)</p>

<p><img src="/images/pentachoron/cube.svg" alt="image label" class="center-image" /></p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="n">using</span> <span class="n">Luxor</span>

<span class="nd">@svg</span> <span class="n">begin</span>
    <span class="n">fontface</span><span class="x">(</span><span class="s">"Menlo"</span><span class="x">)</span>
    <span class="n">fontsize</span><span class="x">(</span><span class="mi">8</span><span class="x">)</span>
    <span class="n">setblend</span><span class="x">(</span><span class="n">blend</span><span class="x">(</span>
        <span class="n">boxtopcenter</span><span class="x">(</span><span class="n">BoundingBox</span><span class="x">()),</span>
        <span class="n">boxmiddlecenter</span><span class="x">(</span><span class="n">BoundingBox</span><span class="x">()),</span>
        <span class="s">"skyblue"</span><span class="x">,</span>
        <span class="s">"white"</span><span class="x">))</span>
    <span class="n">box</span><span class="x">(</span><span class="n">boxtopleft</span><span class="x">(</span><span class="n">BoundingBox</span><span class="x">()),</span>
        <span class="n">boxmiddleright</span><span class="x">(</span><span class="n">BoundingBox</span><span class="x">()),</span> <span class="x">:</span><span class="n">fill</span><span class="x">)</span>

    <span class="n">setblend</span><span class="x">(</span><span class="n">blend</span><span class="x">(</span>
        <span class="n">boxmiddlecenter</span><span class="x">(</span><span class="n">BoundingBox</span><span class="x">()),</span>
        <span class="n">boxbottomcenter</span><span class="x">(</span><span class="n">BoundingBox</span><span class="x">()),</span>
        <span class="s">"grey95"</span><span class="x">,</span>
        <span class="s">"grey45"</span>
        <span class="x">))</span>
    <span class="n">box</span><span class="x">(</span><span class="n">boxmiddleleft</span><span class="x">(</span><span class="n">BoundingBox</span><span class="x">()),</span>
        <span class="n">boxbottomright</span><span class="x">(</span><span class="n">BoundingBox</span><span class="x">()),</span> <span class="x">:</span><span class="n">fill</span><span class="x">)</span>

    <span class="n">sethue</span><span class="x">(</span><span class="s">"black"</span><span class="x">)</span>
    <span class="n">setline</span><span class="x">(</span><span class="mi">2</span><span class="x">)</span>
    <span class="n">bx1</span> <span class="o">=</span> <span class="n">box</span><span class="x">(</span><span class="n">O</span><span class="x">,</span> <span class="mi">250</span><span class="x">,</span> <span class="mi">250</span><span class="x">,</span> <span class="n">vertices</span><span class="o">=</span><span class="n">true</span><span class="x">)</span>
    <span class="n">poly</span><span class="x">(</span><span class="n">bx1</span><span class="x">,</span> <span class="x">:</span><span class="n">stroke</span><span class="x">,</span> <span class="n">close</span><span class="o">=</span><span class="n">true</span><span class="x">)</span>
    <span class="n">label</span><span class="o">.</span><span class="x">([</span><span class="s">"-1/1/1"</span><span class="x">,</span> <span class="s">"-1/-1/1"</span><span class="x">,</span> <span class="s">"1/-1/1"</span><span class="x">,</span> <span class="s">"1/1/1"</span><span class="x">],</span>
        <span class="n">slope</span><span class="o">.</span><span class="x">(</span><span class="n">O</span><span class="x">,</span> <span class="n">bx1</span><span class="x">),</span> <span class="n">bx1</span><span class="x">)</span>

    <span class="n">setline</span><span class="x">(</span><span class="mi">1</span><span class="x">)</span>
    <span class="n">bx2</span> <span class="o">=</span> <span class="n">box</span><span class="x">(</span><span class="n">O</span><span class="x">,</span> <span class="mi">150</span><span class="x">,</span> <span class="mi">150</span><span class="x">,</span> <span class="n">vertices</span><span class="o">=</span><span class="n">true</span><span class="x">)</span>
    <span class="n">poly</span><span class="x">(</span><span class="n">bx2</span><span class="x">,</span> <span class="x">:</span><span class="n">stroke</span><span class="x">,</span> <span class="n">close</span><span class="o">=</span><span class="n">true</span><span class="x">)</span>
    <span class="n">label</span><span class="o">.</span><span class="x">([</span><span class="s">"-1/1/0"</span><span class="x">,</span> <span class="s">"-1/-1/0"</span><span class="x">,</span> <span class="s">"1/-1/0"</span><span class="x">,</span> <span class="s">"1/1/0"</span><span class="x">],</span>
        <span class="n">slope</span><span class="o">.</span><span class="x">(</span><span class="n">O</span><span class="x">,</span> <span class="n">bx2</span><span class="x">),</span> <span class="n">bx2</span><span class="x">,</span> <span class="n">offset</span><span class="o">=-</span><span class="mi">45</span><span class="x">)</span>

    <span class="n">map</span><span class="x">((</span><span class="n">x</span><span class="x">,</span> <span class="n">y</span><span class="x">)</span> <span class="o">-&gt;</span> <span class="n">line</span><span class="x">(</span><span class="n">x</span><span class="x">,</span> <span class="n">y</span><span class="x">,</span> <span class="x">:</span><span class="n">stroke</span><span class="x">),</span> <span class="n">bx1</span><span class="x">,</span> <span class="n">bx2</span><span class="x">)</span>
<span class="k">end</span> <span class="mi">500</span> <span class="mi">500</span> <span class="s">"images/pentachoron/cube.svg"</span></code></pre></figure>

<p>So the idea is to project the cube from 3D to 2D by keeping the first two values, and multiplying or modifying them by the third value. We’ll make a <code class="highlighter-rouge">convert()</code> function to do this:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="k">function</span><span class="nf"> convert</span><span class="x">(</span><span class="n">Point</span><span class="x">,</span> <span class="n">pt3</span><span class="o">::</span><span class="n">Point3D</span><span class="x">)</span>
    <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="x">(</span><span class="n">K</span> <span class="o">-</span> <span class="n">pt3</span><span class="o">.</span><span class="n">z</span><span class="x">)</span>
    <span class="k">return</span> <span class="n">Point</span><span class="x">(</span><span class="n">pt3</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">k</span><span class="x">,</span> <span class="n">pt3</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">k</span><span class="x">)</span>
<span class="k">end</span></code></pre></figure>

<p><code class="highlighter-rouge">K</code> is just a constant which provides a consistent value for depth:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="kd">const</span> <span class="n">K</span> <span class="o">=</span> <span class="mf">4.0</span></code></pre></figure>

<p>Testing this quickly in Luxor.jl gives promising results:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="nd">@svg</span> <span class="n">begin</span>
    <span class="n">cube</span> <span class="o">=</span> <span class="n">Point3D</span><span class="x">[</span>
        <span class="n">Point3D</span><span class="x">(</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">),</span>
        <span class="n">Point3D</span><span class="x">(</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">),</span>
        <span class="n">Point3D</span><span class="x">(</span> <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">),</span>
        <span class="n">Point3D</span><span class="x">(</span> <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">),</span>
        <span class="n">Point3D</span><span class="x">(</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">),</span>
        <span class="n">Point3D</span><span class="x">(</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">),</span>
        <span class="n">Point3D</span><span class="x">(</span> <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">),</span>
        <span class="n">Point3D</span><span class="x">(</span> <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">),</span>
    <span class="x">]</span>
    <span class="n">circle</span><span class="o">.</span><span class="x">(</span><span class="nb">convert</span><span class="o">.</span><span class="x">(</span><span class="n">Point</span><span class="x">,</span> <span class="n">cube</span><span class="x">)</span> <span class="o">*</span> <span class="mi">300</span><span class="x">,</span> <span class="mi">5</span><span class="x">,</span> <span class="x">:</span><span class="n">fill</span><span class="x">)</span>
<span class="k">end</span> <span class="mi">500</span> <span class="mi">500</span> <span class="s">"images/pentachoron/basic3_to_2.png"</span></code></pre></figure>

<p><img src="/images/pentachoron/basic3_to_2.png" alt="image label" class="center-image" /></p>

<p>It’s a simple type of perspective projection.</p>

<p>Using the same principle, let’s make a method for converting a 4D point.</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="k">function</span><span class="nf"> convert</span><span class="x">(</span><span class="n">Point3D</span><span class="x">,</span> <span class="n">pt4</span><span class="o">::</span><span class="n">Point4D</span><span class="x">)</span>
    <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="x">(</span><span class="n">K</span> <span class="o">-</span> <span class="n">pt4</span><span class="o">.</span><span class="n">w</span><span class="x">)</span>
    <span class="k">return</span> <span class="n">Point3D</span><span class="x">(</span><span class="n">pt4</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">k</span><span class="x">,</span> <span class="n">pt4</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">k</span><span class="x">,</span> <span class="n">pt4</span><span class="o">.</span><span class="n">z</span> <span class="o">*</span> <span class="n">k</span><span class="x">)</span>
<span class="k">end</span></code></pre></figure>

<p>Let’s hope it works.</p>

<p>We can combine these into a single utility function called <code class="highlighter-rouge">flatten()</code> that takes a list of 4D points and double-maps them into a list of 2D points suitable for drawing.</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="k">function</span><span class="nf"> flatten</span><span class="x">(</span><span class="n">shape4</span><span class="x">)</span>
    <span class="k">return</span> <span class="n">map</span><span class="x">(</span><span class="n">pt3</span> <span class="o">-&gt;</span> <span class="nb">convert</span><span class="x">(</span><span class="n">Point</span><span class="x">,</span> <span class="n">pt3</span><span class="x">),</span> <span class="n">map</span><span class="x">(</span><span class="n">pt4</span> <span class="o">-&gt;</span> <span class="nb">convert</span><span class="x">(</span><span class="n">Point3D</span><span class="x">,</span> <span class="n">pt4</span><span class="x">),</span> <span class="n">shape4</span><span class="x">))</span>
<span class="k">end</span></code></pre></figure>

<h2 id="going-up-a-level">Going up a level</h2>

<p>To test this, we’ll define the vertices of a unit pentachoron:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="kd">const</span> <span class="n">n</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">√5</span>

<span class="kd">const</span> <span class="n">pentachoron</span> <span class="o">=</span> <span class="x">[</span><span class="n">Point4D</span><span class="x">(</span><span class="n">vertex</span><span class="o">...</span><span class="x">)</span> <span class="k">for</span> <span class="n">vertex</span> <span class="k">in</span> <span class="x">[</span>
    <span class="x">[</span> <span class="mf">1.0</span><span class="x">,</span>  <span class="mf">1.0</span><span class="x">,</span>  <span class="mf">1.0</span><span class="x">,</span> <span class="n">n</span><span class="x">],</span>
    <span class="x">[</span> <span class="mf">1.0</span><span class="x">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="x">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="x">,</span> <span class="n">n</span><span class="x">],</span>
    <span class="x">[</span><span class="o">-</span><span class="mf">1.0</span><span class="x">,</span>  <span class="mf">1.0</span><span class="x">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="x">,</span> <span class="n">n</span><span class="x">],</span>
    <span class="x">[</span><span class="o">-</span><span class="mf">1.0</span><span class="x">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="x">,</span>  <span class="mf">1.0</span><span class="x">,</span> <span class="n">n</span><span class="x">],</span>
    <span class="x">[</span> <span class="mf">0.0</span><span class="x">,</span>  <span class="mf">0.0</span><span class="x">,</span>  <span class="mf">0.0</span><span class="x">,</span> <span class="n">n</span> <span class="o">+</span> <span class="n">√5</span><span class="x">]]]</span></code></pre></figure>

<p>(According to <a href="https://en.wikipedia.org/wiki/5-cell">Wikipedia</a>, other names for the pentachoron include:</p>

<ul>
  <li>Regular 5-cell</li>
  <li>C5</li>
  <li>pentatope</li>
  <li>pentahedroid</li>
  <li>tetrahedral pyramid</li>
  <li>4-simplex</li>
</ul>

<p>I think <em>pentachoron</em> is the coolest, though.)</p>

<p>Here’s a list of “faces”, with each face defined by three of the vertices:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="kd">const</span> <span class="n">pentachoronfaces</span> <span class="o">=</span> <span class="x">[</span>
    <span class="x">[</span><span class="mi">1</span><span class="x">,</span> <span class="mi">2</span><span class="x">,</span> <span class="mi">3</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">1</span><span class="x">,</span> <span class="mi">2</span><span class="x">,</span> <span class="mi">4</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">1</span><span class="x">,</span> <span class="mi">2</span><span class="x">,</span> <span class="mi">5</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">1</span><span class="x">,</span> <span class="mi">3</span><span class="x">,</span> <span class="mi">4</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">1</span><span class="x">,</span> <span class="mi">3</span><span class="x">,</span> <span class="mi">5</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">1</span><span class="x">,</span> <span class="mi">4</span><span class="x">,</span> <span class="mi">5</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">2</span><span class="x">,</span> <span class="mi">3</span><span class="x">,</span> <span class="mi">4</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">2</span><span class="x">,</span> <span class="mi">3</span><span class="x">,</span> <span class="mi">5</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">2</span><span class="x">,</span> <span class="mi">4</span><span class="x">,</span> <span class="mi">5</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">3</span><span class="x">,</span> <span class="mi">4</span><span class="x">,</span> <span class="mi">5</span><span class="x">]]</span></code></pre></figure>

<p>A quick test:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="nd">@svg</span> <span class="n">begin</span>
    <span class="n">setopacity</span><span class="x">(</span><span class="mf">0.2</span><span class="x">)</span>
    <span class="n">pentachoron2D</span> <span class="o">=</span> <span class="n">flatten</span><span class="x">(</span><span class="n">pentachoron</span><span class="x">)</span>
    <span class="k">for</span> <span class="x">(</span><span class="n">n</span><span class="x">,</span> <span class="n">face</span><span class="x">)</span> <span class="k">in</span> <span class="n">enumerate</span><span class="x">(</span><span class="n">pentachoronfaces</span><span class="x">)</span>
        <span class="n">randomhue</span><span class="x">()</span>
        <span class="n">poly</span><span class="x">(</span><span class="mi">1500</span> <span class="o">*</span> <span class="n">pentachoron2D</span><span class="x">[</span><span class="n">face</span><span class="x">],</span> <span class="x">:</span><span class="n">fillpreserve</span><span class="x">,</span> <span class="n">close</span><span class="o">=</span><span class="n">true</span><span class="x">)</span>
        <span class="n">sethue</span><span class="x">(</span><span class="s">"black"</span><span class="x">)</span>
        <span class="n">strokepath</span><span class="x">()</span>
    <span class="k">end</span>
<span class="k">end</span> <span class="mi">600</span> <span class="mi">250</span> <span class="s">"images/pentachoron/firstdraw.svg"</span></code></pre></figure>

<p><img src="/images/pentachoron/firstdraw.svg" alt="image label" class="center-image" /></p>

<p>This isn’t very interesting, although I <em>think</em> it’s correct. To see a more appealing display, let’s make it dance…</p>

<h2 id="swings-and-roundabouts">Swings and roundabouts</h2>

<p>You usually rotate 2D points about a 1D point. You usually rotate 3D points about a 2D line (often one of the XYZ axes). So logically you’d rotate 4D points with reference to a 3D plane. We’ll define some matrices that do 4D rotations relative to a plane defined by two of the X, Y, Z, and W axes.</p>

<p>As I’m thinking about it, the XY plane is typically the plane of the drawing surface. If you think of the XY plane as a computer screen straight in front of you, the XZ plane is parallel to your desk or floor, and the YZ plane is like a wall beside your desk on your right or left side.</p>

<p>But what about the XW plane? And the YW and ZW planes, for that matter? This is the mystery of 4D shapes: we can’t see these planes, we can only imagine their existence by watching shapes moving through and around them.</p>

<p>Here’s a function that generates a suitable rotation matrix for rotating a 4D point in the XY plane:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="k">function</span><span class="nf"> XY</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>
    <span class="x">[</span><span class="n">cos</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>   <span class="o">-</span><span class="n">sin</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>  <span class="mi">0</span>        <span class="mi">0</span><span class="x">;</span>
    <span class="n">sin</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>    <span class="n">cos</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>   <span class="mi">0</span>        <span class="mi">0</span><span class="x">;</span>
    <span class="mi">0</span>         <span class="mi">0</span>        <span class="mi">1</span>        <span class="mi">0</span><span class="x">;</span>
    <span class="mi">0</span>         <span class="mi">0</span>        <span class="mi">0</span>        <span class="mi">1</span><span class="x">]</span>
<span class="k">end</span></code></pre></figure>

<p>and here’s another one that rotates a 4D point in the XW plane:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="k">function</span><span class="nf"> XW</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>
    <span class="x">[</span><span class="n">cos</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>   <span class="mi">0</span>        <span class="mi">0</span>        <span class="o">-</span><span class="n">sin</span><span class="x">(</span><span class="n">θ</span><span class="x">);</span>
    <span class="mi">0</span>         <span class="mi">1</span>        <span class="mi">0</span>        <span class="mi">0</span><span class="x">;</span>
    <span class="mi">0</span>         <span class="mi">0</span>        <span class="mi">1</span>        <span class="mi">0</span><span class="x">;</span>
    <span class="n">sin</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>    <span class="mi">0</span>        <span class="mi">0</span>        <span class="n">cos</span><span class="x">(</span><span class="n">θ</span><span class="x">)]</span>
<span class="k">end</span></code></pre></figure>

<p>Oh, it looks like we’re having a matrix party, so we might as well do the others while we’re here:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="k">function</span><span class="nf"> XZ</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>
    <span class="x">[</span><span class="n">cos</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>   <span class="mi">0</span>        <span class="o">-</span><span class="n">sin</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>  <span class="mi">0</span><span class="x">;</span>
    <span class="mi">0</span>         <span class="mi">1</span>        <span class="mi">0</span>        <span class="mi">0</span><span class="x">;</span>
    <span class="n">sin</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>    <span class="mi">0</span>        <span class="n">cos</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>   <span class="mi">0</span><span class="x">;</span>
    <span class="mi">0</span>         <span class="mi">0</span>        <span class="mi">0</span>        <span class="mi">1</span><span class="x">]</span>
<span class="k">end</span>


<span class="k">function</span><span class="nf"> YZ</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>
    <span class="x">[</span><span class="mi">1</span>        <span class="mi">0</span>        <span class="mi">0</span>        <span class="mi">0</span><span class="x">;</span>
    <span class="mi">0</span>         <span class="n">cos</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>   <span class="o">-</span><span class="n">sin</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>  <span class="mi">0</span><span class="x">;</span>
    <span class="mi">0</span>         <span class="n">sin</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>   <span class="n">cos</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>   <span class="mi">0</span><span class="x">;</span>
    <span class="mi">0</span>         <span class="mi">0</span>        <span class="mi">0</span>        <span class="mi">1</span><span class="x">]</span>
<span class="k">end</span>

<span class="k">function</span><span class="nf"> YW</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>
    <span class="x">[</span><span class="mi">1</span>        <span class="mi">0</span>        <span class="mi">0</span>        <span class="mi">0</span><span class="x">;</span>
    <span class="mi">0</span>         <span class="n">cos</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>   <span class="mi">0</span>        <span class="o">-</span><span class="n">sin</span><span class="x">(</span><span class="n">θ</span><span class="x">);</span>
    <span class="mi">0</span>         <span class="mi">0</span>        <span class="mi">1</span>        <span class="mi">0</span><span class="x">;</span>
    <span class="mi">0</span>         <span class="n">sin</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>   <span class="mi">0</span>        <span class="n">cos</span><span class="x">(</span><span class="n">θ</span><span class="x">)]</span>
<span class="k">end</span>

<span class="k">function</span><span class="nf"> ZW</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>
    <span class="x">[</span><span class="mi">1</span>        <span class="mi">0</span>        <span class="mi">0</span>        <span class="mi">0</span><span class="x">;</span>
    <span class="mi">0</span>         <span class="mi">1</span>        <span class="mi">0</span>        <span class="mi">0</span><span class="x">;</span>
    <span class="mi">0</span>         <span class="mi">0</span>        <span class="n">cos</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>   <span class="o">-</span><span class="n">sin</span><span class="x">(</span><span class="n">θ</span><span class="x">);</span>
    <span class="mi">0</span>         <span class="mi">0</span>        <span class="n">sin</span><span class="x">(</span><span class="n">θ</span><span class="x">)</span>   <span class="n">cos</span><span class="x">(</span><span class="n">θ</span><span class="x">)];</span>
<span class="k">end</span></code></pre></figure>

<p>We’ll make a handy utility function that uses one of these matrix functions to rotate an array of 4D points <code class="highlighter-rouge">A</code> in the plane defined by the matrix function:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="k">function</span><span class="nf"> rotate4</span><span class="x">(</span><span class="n">A</span><span class="x">,</span> <span class="n">matrixfunction</span><span class="x">)</span>
    <span class="k">return</span> <span class="n">map</span><span class="x">(</span><span class="n">A</span><span class="x">)</span> <span class="n">do</span> <span class="n">pt4</span>
        <span class="n">Point4D</span><span class="x">(</span><span class="n">matrixfunction</span> <span class="o">*</span> <span class="n">pt4</span><span class="x">)</span>
    <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p>So we can write <code class="highlighter-rouge">rotate4(A, XW(π/2))</code> to rotate the array of points in <code class="highlighter-rouge">A</code> in the XW plane by π/2. We can also write <code class="highlighter-rouge">rotate4(A, XW(π/2) * XY(π/2))</code> to rotate the points first in the XW plane and then in the XY plane.</p>

<p>Notice that the <code class="highlighter-rouge">rotate4()</code> function returns a new array, rather than modifying the original one. This probably has some disadvantages, but for now it means that we don’t have to keep track of mutating objects so carefully.</p>

<h2 id="it-moves">It moves</h2>

<p>We’re now able to make an animation that rotates our pentachoron in one or more planes.</p>

<p>The <code class="highlighter-rouge">frame()</code> function generates a single frame, using the framenumber (<code class="highlighter-rouge">eased_n</code> provides a normalized version of the framenumber modulated by the easing function) to control the rotation between 0 and 2π. The scalefactor makes the unit shape big enough to fill the frame.</p>

<p>It’s helpful to color the faces very slightly, using <code class="highlighter-rouge">poly(..., :fill)</code>-er.</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="n">using</span> <span class="n">ColorSchemes</span>

<span class="k">function</span><span class="nf"> frame</span><span class="x">(</span><span class="n">scene</span><span class="x">,</span> <span class="n">framenumber</span><span class="x">,</span> <span class="n">scalefactor</span><span class="o">=</span><span class="mi">1000</span><span class="x">)</span>
    <span class="n">background</span><span class="x">(</span><span class="s">"antiquewhite"</span><span class="x">)</span>
    <span class="n">setlinejoin</span><span class="x">(</span><span class="s">"bevel"</span><span class="x">)</span>
    <span class="n">setline</span><span class="x">(</span><span class="mf">1.0</span><span class="x">)</span>
    <span class="n">sethue</span><span class="x">(</span><span class="s">"black"</span><span class="x">)</span>
    <span class="n">eased_n</span>       <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">easingfunction</span><span class="x">(</span><span class="n">framenumber</span><span class="x">,</span> <span class="mi">0</span><span class="x">,</span> <span class="mi">1</span><span class="x">,</span> <span class="n">scene</span><span class="o">.</span><span class="n">framerange</span><span class="o">.</span><span class="n">stop</span><span class="x">)</span>
    <span class="n">pentachoron′</span>  <span class="o">=</span> <span class="n">rotate4</span><span class="x">(</span><span class="n">pentachoron</span><span class="x">,</span> <span class="n">XZ</span><span class="x">(</span><span class="n">eased_n</span> <span class="o">*</span> <span class="mi">2</span><span class="n">π</span><span class="x">))</span>
    <span class="n">pentachoron2D</span> <span class="o">=</span> <span class="n">flatten</span><span class="x">(</span><span class="n">pentachoron′</span><span class="x">)</span>

    <span class="n">setopacity</span><span class="x">(</span><span class="mf">0.2</span><span class="x">)</span>
    <span class="k">for</span> <span class="x">(</span><span class="n">n</span><span class="x">,</span> <span class="n">face</span><span class="x">)</span> <span class="k">in</span> <span class="n">enumerate</span><span class="x">(</span><span class="n">pentachoronfaces</span><span class="x">)</span>
        <span class="n">sethue</span><span class="x">(</span><span class="n">get</span><span class="x">(</span><span class="n">ColorSchemes</span><span class="o">.</span><span class="n">diverging_rainbow_bgymr_45_85_c67_n256</span><span class="x">,</span>
            <span class="n">n</span><span class="o">/</span><span class="n">length</span><span class="x">(</span><span class="n">pentachoronfaces</span><span class="x">)))</span>
        <span class="n">poly</span><span class="x">(</span><span class="n">scalefactor</span> <span class="o">*</span> <span class="n">pentachoron2D</span><span class="x">[</span><span class="n">face</span><span class="x">],</span> <span class="x">:</span><span class="n">fillpreserve</span><span class="x">,</span> <span class="n">close</span><span class="o">=</span><span class="n">true</span><span class="x">)</span>
        <span class="n">sethue</span><span class="x">(</span><span class="s">"black"</span><span class="x">)</span>
        <span class="n">strokepath</span><span class="x">()</span>
    <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p>And this function generates a series of frames and saves them to an animation:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="k">function</span><span class="nf"> makemovie</span><span class="x">(</span><span class="n">w</span><span class="x">,</span> <span class="n">h</span><span class="x">,</span> <span class="n">fname</span><span class="x">;</span>
        <span class="n">scalefactor</span><span class="o">=</span><span class="mi">1000</span><span class="x">)</span>
    <span class="n">movie1</span> <span class="o">=</span> <span class="n">Movie</span><span class="x">(</span><span class="n">w</span><span class="x">,</span> <span class="n">h</span><span class="x">,</span> <span class="s">"4D movie"</span><span class="x">)</span>
    <span class="n">animate</span><span class="x">(</span><span class="n">movie1</span><span class="x">,</span>
        <span class="n">Scene</span><span class="x">(</span><span class="n">movie1</span><span class="x">,</span> <span class="x">(</span><span class="n">s</span><span class="x">,</span> <span class="n">f</span><span class="x">)</span>  <span class="o">-&gt;</span> <span class="n">frame</span><span class="x">(</span><span class="n">s</span><span class="x">,</span> <span class="n">f</span><span class="x">,</span> <span class="n">scalefactor</span><span class="x">),</span>
            <span class="mi">1</span><span class="x">:</span><span class="mi">300</span><span class="x">,</span>
            <span class="n">easingfunction</span><span class="o">=</span><span class="n">easeinoutsine</span><span class="x">),</span>
        <span class="n">creategif</span><span class="o">=</span><span class="n">true</span><span class="x">,</span>
        <span class="n">pathname</span><span class="o">=</span><span class="s">"images/pentachoron/</span><span class="si">$(fname)</span><span class="s">"</span><span class="x">)</span>
<span class="k">end</span>

<span class="n">makemovie</span><span class="x">(</span><span class="mi">600</span><span class="x">,</span> <span class="mi">600</span><span class="x">,</span> <span class="s">"pentachoron-xz.gif"</span><span class="x">,</span> <span class="n">scalefactor</span><span class="o">=</span><span class="mi">2000</span><span class="x">)</span></code></pre></figure>

<p>This is a rotation in the “parallel to the desk my computer’s resting on” XZ plane.</p>

<p><img src="/images/pentachoron/pentachoron-xz.gif" alt="image label" class="center-image" /></p>

<p>It’s not a realistic rendering with hidden-surface removal—I wouldn’t know how to do that in 3D, let alone 4D. But it does make it slightly easier to follow some of the faces. Something to do one day might be to sort the “faces” to determine which are drawn first, but given the maths involved this is a challenge I’m dubious about tackling…</p>

<p>We can modify <code class="highlighter-rouge">frame()</code> to allow various permutations of XY, XW, XZ, YZ, YW, and ZW rotations. Here’s a version that rotates in XZ, followed by YW:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="k">function</span><span class="nf"> frame</span><span class="x">(</span><span class="n">scene</span><span class="x">,</span> <span class="n">framenumber</span><span class="x">,</span> <span class="n">scalefactor</span><span class="o">=</span><span class="mi">1000</span><span class="x">)</span>
    <span class="n">background</span><span class="x">(</span><span class="s">"antiquewhite"</span><span class="x">)</span>
    <span class="n">setlinejoin</span><span class="x">(</span><span class="s">"bevel"</span><span class="x">)</span>
    <span class="n">setline</span><span class="x">(</span><span class="mf">1.0</span><span class="x">)</span>
    <span class="n">setopacity</span><span class="x">(</span><span class="mf">0.2</span><span class="x">)</span>

    <span class="n">eased_n</span>       <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">easingfunction</span><span class="x">(</span><span class="n">framenumber</span><span class="x">,</span> <span class="mi">0</span><span class="x">,</span> <span class="mi">1</span><span class="x">,</span> <span class="n">scene</span><span class="o">.</span><span class="n">framerange</span><span class="o">.</span><span class="n">stop</span><span class="x">)</span>
    <span class="n">pentachoron2D</span> <span class="o">=</span> <span class="n">flatten</span><span class="x">(</span>
        <span class="n">rotate4</span><span class="x">(</span>
            <span class="n">pentachoron</span><span class="x">,</span>
                <span class="n">XZ</span><span class="x">(</span><span class="n">eased_n</span> <span class="o">*</span> <span class="mi">2</span><span class="n">π</span><span class="x">)</span> <span class="o">*</span>
                <span class="n">YW</span><span class="x">(</span><span class="n">eased_n</span> <span class="o">*</span> <span class="mi">2</span><span class="n">π</span><span class="x">)))</span>
    <span class="k">for</span> <span class="x">(</span><span class="n">n</span><span class="x">,</span> <span class="n">face</span><span class="x">)</span> <span class="k">in</span> <span class="n">enumerate</span><span class="x">(</span><span class="n">pentachoronfaces</span><span class="x">)</span>
        <span class="n">sethue</span><span class="x">(</span><span class="n">get</span><span class="x">(</span><span class="n">ColorSchemes</span><span class="o">.</span><span class="n">diverging_rainbow_bgymr_45_85_c67_n256</span><span class="x">,</span>
            <span class="n">n</span><span class="o">/</span><span class="n">length</span><span class="x">(</span><span class="n">pentachoronfaces</span><span class="x">)))</span>
        <span class="n">poly</span><span class="x">(</span><span class="n">scalefactor</span> <span class="o">*</span> <span class="n">pentachoron2D</span><span class="x">[</span><span class="n">face</span><span class="x">],</span> <span class="x">:</span><span class="n">fillpreserve</span><span class="x">,</span> <span class="n">close</span><span class="o">=</span><span class="n">true</span><span class="x">)</span>
        <span class="n">sethue</span><span class="x">(</span><span class="s">"black"</span><span class="x">)</span>
        <span class="n">strokepath</span><span class="x">()</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="n">makemovie</span><span class="x">(</span><span class="mi">800</span><span class="x">,</span> <span class="mi">800</span><span class="x">,</span> <span class="s">"pentachoron-xz-yw.gif"</span><span class="x">,</span> <span class="n">scalefactor</span><span class="o">=</span><span class="mi">2000</span><span class="x">)</span></code></pre></figure>

<p><img src="/images/pentachoron/pentachoron-xz-yw.gif" alt="image label" class="center-image" /></p>

<p>These are starting to make me think of kneading machines for making pizza dough.</p>

<p>You can draw a few different models at once, placing each one in a separate cell:</p>

<p><img src="/images/pentachoron/showall-pentachoronmovie.gif" alt="image label" class="center-image" /></p>

<p>This is showing 2D shadows of 3D shadows of 4D objects. Do these objects exist? I don’t know…</p>

<h3 id="other-shapes">Other shapes</h3>

<p>While the word “pentachoron” was unfamiliar to me until recently, the word “tesseract” is much more familiar. After all, didn’t the tesseract contain the Space Stone, one of the six Infinity Stones that apparently predate the universe and possess unlimited energy? (According to the scientists at Marvel Comics, at least…) It’s also the name of a 4-dimensional hypercube, one step up from the pentachoron.</p>

<p>Here are the vital numbers for the tesseract:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="kd">const</span> <span class="n">tesseract</span> <span class="o">=</span> <span class="x">[</span><span class="n">Point4D</span><span class="x">(</span><span class="n">vertex</span><span class="o">...</span><span class="x">)</span> <span class="k">for</span> <span class="n">vertex</span> <span class="k">in</span> <span class="x">[</span>
    <span class="x">[</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span> <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span> <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span> <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span> <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span> <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span> <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span> <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span> <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">],</span>
    <span class="x">[</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">]]]</span>

<span class="kd">const</span> <span class="n">tesseractfaces</span> <span class="o">=</span> <span class="x">[</span>
    <span class="x">[</span><span class="mi">1</span><span class="x">,</span>   <span class="mi">2</span><span class="x">,</span>   <span class="mi">3</span><span class="x">,</span>   <span class="mi">4</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">1</span><span class="x">,</span>   <span class="mi">2</span><span class="x">,</span>  <span class="mi">10</span><span class="x">,</span>   <span class="mi">9</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">1</span><span class="x">,</span>   <span class="mi">4</span><span class="x">,</span>   <span class="mi">8</span><span class="x">,</span>   <span class="mi">5</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">1</span><span class="x">,</span>   <span class="mi">5</span><span class="x">,</span>   <span class="mi">6</span><span class="x">,</span>   <span class="mi">2</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">1</span><span class="x">,</span>   <span class="mi">9</span><span class="x">,</span>  <span class="mi">12</span><span class="x">,</span>   <span class="mi">4</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">2</span><span class="x">,</span>   <span class="mi">3</span><span class="x">,</span>  <span class="mi">11</span><span class="x">,</span>  <span class="mi">10</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">2</span><span class="x">,</span>   <span class="mi">3</span><span class="x">,</span>   <span class="mi">7</span><span class="x">,</span>   <span class="mi">6</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">3</span><span class="x">,</span>   <span class="mi">4</span><span class="x">,</span>   <span class="mi">8</span><span class="x">,</span>   <span class="mi">7</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">5</span><span class="x">,</span>   <span class="mi">6</span><span class="x">,</span>  <span class="mi">14</span><span class="x">,</span>  <span class="mi">13</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">5</span><span class="x">,</span>   <span class="mi">6</span><span class="x">,</span>   <span class="mi">7</span><span class="x">,</span>   <span class="mi">8</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">5</span><span class="x">,</span>   <span class="mi">8</span><span class="x">,</span>  <span class="mi">16</span><span class="x">,</span>  <span class="mi">13</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">6</span><span class="x">,</span>   <span class="mi">7</span><span class="x">,</span>  <span class="mi">15</span><span class="x">,</span>  <span class="mi">14</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">7</span><span class="x">,</span>   <span class="mi">8</span><span class="x">,</span>  <span class="mi">16</span><span class="x">,</span>  <span class="mi">15</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">9</span><span class="x">,</span>  <span class="mi">10</span><span class="x">,</span>  <span class="mi">11</span><span class="x">,</span>  <span class="mi">12</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">9</span><span class="x">,</span>  <span class="mi">10</span><span class="x">,</span>  <span class="mi">14</span><span class="x">,</span>  <span class="mi">13</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">9</span><span class="x">,</span>  <span class="mi">13</span><span class="x">,</span>  <span class="mi">16</span><span class="x">,</span>  <span class="mi">12</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">10</span><span class="x">,</span> <span class="mi">11</span><span class="x">,</span>  <span class="mi">15</span><span class="x">,</span>  <span class="mi">14</span><span class="x">],</span>
    <span class="x">[</span><span class="mi">13</span><span class="x">,</span> <span class="mi">14</span><span class="x">,</span>  <span class="mi">15</span><span class="x">,</span>  <span class="mi">16</span><span class="x">]]</span></code></pre></figure>

<p>Replace <code class="highlighter-rouge">pentachoron</code> everywhere by <code class="highlighter-rouge">tesseract</code> in the above code, choosing the rotations to taste.</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="k">function</span><span class="nf"> frame</span><span class="x">(</span><span class="n">scene</span><span class="x">,</span> <span class="n">framenumber</span><span class="x">,</span> <span class="n">scalefactor</span><span class="o">=</span><span class="mi">1000</span><span class="x">)</span>
    <span class="n">background</span><span class="x">(</span><span class="s">"black"</span><span class="x">)</span>
    <span class="n">setlinejoin</span><span class="x">(</span><span class="s">"bevel"</span><span class="x">)</span>
    <span class="n">setline</span><span class="x">(</span><span class="mf">10.0</span><span class="x">)</span>
    <span class="n">setopacity</span><span class="x">(</span><span class="mf">0.7</span><span class="x">)</span>

    <span class="n">eased_n</span>       <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">easingfunction</span><span class="x">(</span><span class="n">framenumber</span><span class="x">,</span> <span class="mi">0</span><span class="x">,</span> <span class="mi">1</span><span class="x">,</span> <span class="n">scene</span><span class="o">.</span><span class="n">framerange</span><span class="o">.</span><span class="n">stop</span><span class="x">)</span>
    <span class="n">tesseract2D</span> <span class="o">=</span> <span class="n">flatten</span><span class="x">(</span>
        <span class="n">rotate4</span><span class="x">(</span>
            <span class="n">tesseract</span><span class="x">,</span>
                <span class="n">XZ</span><span class="x">(</span><span class="n">eased_n</span> <span class="o">*</span> <span class="mi">2</span><span class="n">π</span><span class="x">)</span> <span class="o">*</span>
                <span class="n">YW</span><span class="x">(</span><span class="n">eased_n</span> <span class="o">*</span> <span class="mi">2</span><span class="n">π</span><span class="x">)))</span>
    <span class="k">for</span> <span class="x">(</span><span class="n">n</span><span class="x">,</span> <span class="n">face</span><span class="x">)</span> <span class="k">in</span> <span class="n">enumerate</span><span class="x">(</span><span class="n">tesseractfaces</span><span class="x">)</span>
        <span class="n">sethue</span><span class="x">([</span><span class="n">Luxor</span><span class="o">.</span><span class="n">lighter_blue</span><span class="x">,</span> <span class="n">Luxor</span><span class="o">.</span><span class="n">lighter_green</span><span class="x">,</span>
            <span class="n">Luxor</span><span class="o">.</span><span class="n">lighter_purple</span><span class="x">,</span> <span class="n">Luxor</span><span class="o">.</span><span class="n">lighter_red</span><span class="x">][</span><span class="n">mod1</span><span class="x">(</span><span class="n">n</span><span class="x">,</span> <span class="mi">4</span><span class="x">)]</span><span class="o">...</span><span class="x">)</span>
        <span class="n">poly</span><span class="x">(</span><span class="n">scalefactor</span> <span class="o">*</span> <span class="n">tesseract2D</span><span class="x">[</span><span class="n">face</span><span class="x">],</span> <span class="x">:</span><span class="n">fillpreserve</span><span class="x">,</span> <span class="n">close</span><span class="o">=</span><span class="n">true</span><span class="x">)</span>
        <span class="n">sethue</span><span class="x">([</span><span class="n">Luxor</span><span class="o">.</span><span class="n">darker_blue</span><span class="x">,</span> <span class="n">Luxor</span><span class="o">.</span><span class="n">darker_green</span><span class="x">,</span>
            <span class="n">Luxor</span><span class="o">.</span><span class="n">darker_purple</span><span class="x">,</span> <span class="n">Luxor</span><span class="o">.</span><span class="n">darker_red</span><span class="x">][</span><span class="n">mod1</span><span class="x">(</span><span class="n">n</span><span class="x">,</span> <span class="mi">4</span><span class="x">)]</span><span class="o">...</span><span class="x">)</span>
        <span class="n">strokepath</span><span class="x">()</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="n">makemovie</span><span class="x">(</span><span class="mi">800</span><span class="x">,</span> <span class="mi">800</span><span class="x">,</span> <span class="s">"tesseract-xz-yw.gif"</span><span class="x">,</span> <span class="n">scalefactor</span><span class="o">=</span><span class="mi">2000</span><span class="x">)</span></code></pre></figure>

<p><img src="/images/pentachoron/tesseract-xz-yw.gif" alt="image label" class="center-image" /></p>

<p>(Just for fun I temporarily switched the color scheme over to the Julia logo colors. You can see the 3D rendering problems more clearly, as well!)</p>

<p>Here’s a composite of four pairs of rotations:</p>

<p><img src="/images/pentachoron/showall-tesseractmovie.gif" alt="image label" class="center-image" /></p>

<h2 id="enough-is-enough">Enough is enough</h2>

<p>It’s tempting to go further, but these web pages do get very big with all these GIFs. But just one more… I quite like this one, the <em>hexadecachoron</em>:</p>

<figure class="highlight"><pre><code class="language-julia" data-lang="julia"><span class="kd">const</span> <span class="n">hexadecachoron</span> <span class="o">=</span> <span class="x">[</span><span class="n">Point4D</span><span class="x">(</span><span class="n">vertex</span><span class="o">...</span><span class="x">)</span> <span class="k">for</span> <span class="n">vertex</span> <span class="k">in</span> <span class="x">[</span>
        <span class="x">[</span> <span class="mi">1</span><span class="x">,</span>  <span class="mi">0</span><span class="x">,</span>  <span class="mi">0</span><span class="x">,</span>  <span class="mi">0</span><span class="x">],</span>
        <span class="x">[</span> <span class="mi">0</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span>  <span class="mi">0</span><span class="x">,</span>  <span class="mi">0</span><span class="x">],</span>
        <span class="x">[</span> <span class="mi">0</span><span class="x">,</span>  <span class="mi">0</span><span class="x">,</span>  <span class="mi">1</span><span class="x">,</span>  <span class="mi">0</span><span class="x">],</span>
        <span class="x">[</span> <span class="mi">0</span><span class="x">,</span>  <span class="mi">0</span><span class="x">,</span>  <span class="mi">0</span><span class="x">,</span>  <span class="mi">1</span><span class="x">],</span>
        <span class="x">[</span><span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">0</span><span class="x">,</span>  <span class="mi">0</span><span class="x">,</span>  <span class="mi">0</span><span class="x">],</span>
        <span class="x">[</span> <span class="mi">0</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">0</span><span class="x">,</span>  <span class="mi">0</span><span class="x">],</span>
        <span class="x">[</span> <span class="mi">0</span><span class="x">,</span>  <span class="mi">0</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">,</span>  <span class="mi">0</span><span class="x">],</span>
        <span class="x">[</span> <span class="mi">0</span><span class="x">,</span>  <span class="mi">0</span><span class="x">,</span>  <span class="mi">0</span><span class="x">,</span> <span class="o">-</span><span class="mi">1</span><span class="x">]]]</span>

<span class="n">using</span> <span class="n">Combinatorics</span>

<span class="kd">const</span> <span class="n">hexadecachoronfaces</span> <span class="o">=</span> <span class="n">combinations</span><span class="x">(</span><span class="mi">1</span><span class="x">:</span><span class="mi">8</span><span class="x">,</span> <span class="mi">3</span><span class="x">)</span>

<span class="k">function</span><span class="nf"> frame</span><span class="x">(</span><span class="n">scene</span><span class="x">,</span> <span class="n">framenumber</span><span class="x">,</span> <span class="n">scalefactor</span><span class="o">=</span><span class="mi">1000</span><span class="x">)</span>
    <span class="n">background</span><span class="x">(</span><span class="s">"antiquewhite"</span><span class="x">)</span>
    <span class="n">setlinejoin</span><span class="x">(</span><span class="s">"bevel"</span><span class="x">)</span>
    <span class="n">setline</span><span class="x">(</span><span class="mf">1.0</span><span class="x">)</span>
    <span class="n">setopacity</span><span class="x">(</span><span class="mf">0.15</span><span class="x">)</span>
    <span class="n">eased_n</span>          <span class="o">=</span>
        <span class="n">scene</span><span class="o">.</span><span class="n">easingfunction</span><span class="x">(</span><span class="n">framenumber</span><span class="x">,</span> <span class="mi">0</span><span class="x">,</span> <span class="mi">1</span><span class="x">,</span> <span class="n">scene</span><span class="o">.</span><span class="n">framerange</span><span class="o">.</span><span class="n">stop</span><span class="x">)</span>
    <span class="n">hexadecachoron2D</span> <span class="o">=</span> <span class="n">flatten</span><span class="x">(</span>
        <span class="n">rotate4</span><span class="x">(</span>
            <span class="n">hexadecachoron</span><span class="x">,</span>
                <span class="n">YZ</span><span class="x">(</span><span class="n">eased_n</span> <span class="o">*</span> <span class="mi">2</span><span class="n">π</span><span class="x">)</span> <span class="o">*</span>
                <span class="n">XZ</span><span class="x">(</span><span class="n">eased_n</span> <span class="o">*</span> <span class="mi">2</span><span class="n">π</span><span class="x">)</span> <span class="o">*</span>
                <span class="n">YW</span><span class="x">(</span><span class="n">eased_n</span> <span class="o">*</span> <span class="mi">2</span><span class="n">π</span><span class="x">)))</span>
    <span class="k">for</span> <span class="x">(</span><span class="n">n</span><span class="x">,</span> <span class="n">face</span><span class="x">)</span> <span class="k">in</span> <span class="n">enumerate</span><span class="x">(</span><span class="n">hexadecachoronfaces</span><span class="x">)</span>
        <span class="n">sethue</span><span class="x">(</span><span class="n">get</span><span class="x">(</span><span class="n">ColorSchemes</span><span class="o">.</span><span class="n">magma</span><span class="x">,</span>
            <span class="n">n</span><span class="o">/</span><span class="n">length</span><span class="x">(</span><span class="n">hexadecachoronfaces</span><span class="x">)))</span>
        <span class="n">poly</span><span class="x">(</span><span class="n">scalefactor</span> <span class="o">*</span> <span class="n">hexadecachoron2D</span><span class="x">[</span><span class="n">face</span><span class="x">],</span> <span class="x">:</span><span class="n">fillpreserve</span><span class="x">,</span> <span class="n">close</span><span class="o">=</span><span class="n">true</span><span class="x">)</span>
        <span class="n">sethue</span><span class="x">(</span><span class="s">"black"</span><span class="x">)</span>
        <span class="n">strokepath</span><span class="x">()</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="n">makemovie</span><span class="x">(</span><span class="mi">650</span><span class="x">,</span> <span class="mi">650</span><span class="x">,</span> <span class="s">"movie-hexadecachoron.gif"</span><span class="x">,</span> <span class="n">scalefactor</span><span class="o">=</span><span class="mi">5000</span><span class="x">)</span></code></pre></figure>

<p><img src="/images/pentachoron/movie-hexadecachoron.gif" alt="image label" class="center-image" /></p>

<p>There’s lots more fun to be had (combining two or more different shapes is fun), but I’m worried about your network and my brain cells, so that’s enough animated GIFs for today.</p>

<p>[2018-04-03]</p>

<p><img src="http://steampiano.net/cormullionknot.gif?pentachoron" alt="cormullion signing off" class="center-image" /></p>

<p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p>


  </div><a class="u-url" href="/blog/2019/04/03/pentachoron.html" hidden></a>
</article>

      </div>
    </main><footer>
<pre class="smallheading">comments or questions - open an issue at <a href="https://github.com/cormullion/cormullion.github.io">github.com/cormullion/</a></pre>
</footer>
</body>

</html>
